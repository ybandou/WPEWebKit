<!DOCTYPE html>
<html>
  <head>
    <title>Check whether scrollable iframes have tile backing</title>
    <script>
        if (window.internals)
            window.internals.settings.setAsyncFrameScrollingEnabled(true);

        if (window.testRunner) {
            testRunner.dumpAsText();
            testRunner.waitUntilDone();
	}

        function doTest()
        {
            if (window.internals && window.testRunner) {
                document.getElementById('layers').innerText = internals.layerTreeAsText(document, internals.LAYER_TREE_INCLUDES_VISIBLE_RECTS | internals.LAYER_TREE_INCLUDES_TILE_CACHES | internals.LAYER_TREE_INCLUDES_BACKING_STORE_ATTACHED);
                testRunner.notifyDone();
            }
        }
    </script>
  </head>
  <body>
    <iframe onload="setTimeout(doTest, 0)" id="frame" style="height: 100px; width: 200px;" scrolling="yes" srcdoc="&lt;div style='height: 300px; width: 400px;'&gt;&lt;/div&gt;"></iframe>
    <pre id="layers">Layer tree goes here</p>
  </body>
</html>
