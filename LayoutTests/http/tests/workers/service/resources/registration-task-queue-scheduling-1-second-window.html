<script>

if (!window.opener)
	alert("This HTML file should not be opened directly")

for (var i = 0; i < 1000; ++i) {
	navigator.serviceWorker.register("empty-worker.js", { })
	.then(function(r) {
		alert("Popup window resolved successfully (unexpected)")
		opener.postMessage("done", "*");
	}, function(e) {
		opener.postMessage("responded", "*");
	})
}

</script>